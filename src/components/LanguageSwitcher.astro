---
import { SUPPORTED, langLabel, t } from "../lib/i18n";
const { lang, pathname } = Astro.props;
const c = t(lang);

const swapLang = (target: string) => {
  const parts = (pathname || "/").split("/").filter(Boolean); // ["nl","..."]
  if (parts.length === 0) return `/${target}/`;
  parts[0] = target;
  return `/${parts.join("/")}/`;
};
---
<div class="badge lang-switcher" aria-label={c.common.languageSwitcherLabel}>
  <span class="dot" aria-hidden="true"></span>
  {SUPPORTED.map((L) => (
    <a
      href={swapLang(L)}
      style={`font-weight:${L===lang ? "900":"750"}; opacity:${L===lang ? "1":"0.78"}`}
      aria-current={L===lang ? "page" : undefined}
    >
      {langLabel(L)}
    </a>
  ))}
</div>
